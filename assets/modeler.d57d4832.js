import"./modulepreload-polyfill.b7f2da20.js";import{a0 as be,j as U,a1 as K,a2 as xe,a3 as ee,o as v,D as k,F as B,a4 as I,c as $,w as t,a as e,a5 as Fe,u as n,a6 as ye,a7 as H,a8 as we,B as te,a9 as ke,h as Ce,aa as ze,ab as N,s as V,b as C,t as A,O,ac as J,ad as ne,ae as oe,d as g,af as Ee,ag as Be,H as q,x as $e,y as De,G as Ae,ah as Ve,ai as Ue,aj as Te,k as Me,r as je,I as G,ak as Le,al as Pe,am as Se,an as Ie,ao as Ke,ap as He,aq as Ne,ar as Oe,p as Je,as as Re,at as We,au as Ye,l as qe,m as Ge,n as Xe,q as Ze,av as Qe,aw as et,ax as tt,A as nt,ay as ot,az as lt,aA as at,M as st,aB as ut,aC as it,aD as pt,aE as rt,aF as X,aG as _t,aH as dt,aI as ct,aJ as mt,z as ft,aK as vt,L as gt,J as ht,K as bt,i as xt}from"./vendor.e6799bbf.js";import{u as Ft,m as Z}from"./index.cf0c916d.js";const yt=["id"],wt=new be([32,32,1]);function kt(){return"__"+wt.next()}const Q=(b,o)=>{o.forEach(l=>l.del=!0),Object.keys(b).forEach(l=>{const i=o.find(u=>u.key===l);i?(i.value=b[l],i.del=!1):o.push({key:l,newKey:l.startsWith("__")?"":l,value:b[l],newValue:b[l],del:!1})});let c=o.length;for(let l=0;l<c;l++)o[l].del&&(o.splice(l,1),l--,c--);return o},R=U({__name:"PropertiesEditor",props:{value:null},setup(b){const o=b,{id:c}=K.useInjectFormItemContext(),l=[],i=xe(Q(o.value,[]));ee(()=>o.value,(a,p)=>{Q(a,i)},{deep:!0});function u(){o.value[kt()]=""}function d(a){i.splice(i.findIndex(p=>p.key===a),1),delete o.value[a]}function m(a){if(a.key===a.newKey)return;const p=a.newKey;if(p.startsWith("__")){console.log("key \u4E0D\u80FD\u4EE5 __ \u5F00\u5934");return}if(i.find(_=>_.key===p)){console.log("\u5B58\u5728\u91CD\u590D\u7684 key");return}const f=a.key;a.key=p,o.value[p]=a.value,delete o.value[f]}function r(a){a.value!==a.newValue&&(o.value[a.key]=a.newValue)}return(a,p)=>{const f=ye,_=H,s=we,z=te,y=ke,E=Ce,M=ze;return v(),k("div",Fe({id:n(c)},a.$attrs),[(v(!0),k(B,null,I(i,(w,T)=>(v(),$(E,{key:T},{default:t(()=>[e(y,{compact:""},{default:t(()=>[e(f,{dropdownMatchSelectWidth:!1,size:"small",value:w.newKey,"onUpdate:value":D=>w.newKey=D,options:l,onBlur:D=>m(w),style:{width:"calc(50% - 12px)"}},null,8,["value","onUpdate:value","onBlur"]),e(_,{value:w.newValue,"onUpdate:value":D=>w.newValue=D,onBlur:D=>r(w),size:"small",style:{width:"calc(50% - 12px)"}},null,8,["value","onUpdate:value","onBlur"]),e(z,{type:"text",size:"small",onClick:D=>d(w.key)},{icon:t(()=>[e(s)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),e(z,{type:"dashed",size:"small",style:{width:"calc(100% - 24px)"},onClick:u},{icon:t(()=>[e(M)]),_:1})],16,yt)}}});const Ct=U({__name:"default",setup(b){const o=N(),c=V("Default Properties Panel");return(l,i)=>{const u=H,d=O,m=J,r=R,a=K;return v(),k(B,null,[C("h1",null,A(c.value),1),e(a,{layout:"vertical",class:"properties-panel-form",model:n(o),name:"ppform"},{default:t(()=>[e(d,{label:"\u7F16\u53F7",extra:"\u552F\u4E00\u6807\u8BC6"},{default:t(()=>[e(u,{value:n(o).id,"onUpdate:value":i[0]||(i[0]=p=>n(o).id=p)},null,8,["value"])]),_:1}),e(d,{label:"\u540D\u79F0",name:"text"},{default:t(()=>[e(m,{value:n(o).text,"onUpdate:value":i[1]||(i[1]=p=>n(o).text=p),"auto-size":""},null,8,["value"])]),_:1}),e(d,{label:"\u63CF\u8FF0",name:"text"},{default:t(()=>[e(m,{value:n(o).text,"onUpdate:value":i[2]||(i[2]=p=>n(o).text=p),"auto-size":""},null,8,["value"])]),_:1}),e(d,{label:"\u6269\u5C55\u5C5E\u6027",name:"properties"},{default:t(()=>[e(r,{value:n(o).properties},null,8,["value"])]),_:1})]),_:1},8,["model"])],64)}}}),zt=C("h1",null,"\u6D41\u7A0B\u5C5E\u6027",-1),Et=U({__name:"top",setup(b){const o=N(!0);return(c,l)=>{const i=H,u=O,d=J,m=K,r=ne,a=R,p=oe;return v(),k(B,null,[zt,e(p,null,{default:t(()=>[e(r,{key:"general",tab:"\u5E38\u89C4"},{default:t(()=>[e(m,{layout:"vertical",class:"properties-panel-form",model:n(o),name:"ppform"},{default:t(()=>[e(u,{label:"\u7F16\u53F7"},{default:t(()=>[e(i,{value:n(o).id,"onUpdate:value":l[0]||(l[0]=f=>n(o).id=f)},null,8,["value"])]),_:1}),e(u,{label:"\u540D\u79F0",name:"text"},{default:t(()=>[e(d,{value:n(o).text,"onUpdate:value":l[1]||(l[1]=f=>n(o).text=f),"auto-size":""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),e(r,{key:"extensions",tab:"\u9AD8\u7EA7"},{default:t(()=>[e(m,{layout:"vertical",class:"properties-panel-form",model:n(o).properties,name:"propsform"},{default:t(()=>[e(u,{label:"\u5C5E\u6027",name:"properties"},{default:t(()=>[e(a,{value:n(o).properties},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],64)}}}),Bt=["src"],$t=g(" \u7528\u6237\u4EFB\u52A1 "),Dt=g("\u62A2\u4EFB\u52A1"),At=g("\u4F1A\u7B7E"),Vt=g("\u4EBA\u5458"),Ut=g("\u89D2\u8272"),Tt=g("\u8868\u8FBE\u5F0F"),Mt=g("\u5355\u8868\u5355"),jt=g("\u590D\u5408\u8868\u5355"),Lt=U({__name:"userTask",setup(b){const o=N();return(c,l)=>{const i=H,u=O,d=J,m=K,r=ne,a=Ee,p=Be,f=R,_=oe;return v(),k(B,null,[C("h1",null,[C("img",{src:n(Ft)},null,8,Bt),$t]),e(_,null,{default:t(()=>[e(r,{key:"general",tab:"\u5E38\u89C4"},{default:t(()=>[e(m,{layout:"vertical",class:"properties-panel-form",model:n(o),name:"ppform"},{default:t(()=>[e(u,{label:"\u7F16\u53F7"},{default:t(()=>[e(i,{value:n(o).id,"onUpdate:value":l[0]||(l[0]=s=>n(o).id=s)},null,8,["value"])]),_:1}),e(u,{label:"\u540D\u79F0",name:"text"},{default:t(()=>[e(d,{value:n(o).text,"onUpdate:value":l[1]||(l[1]=s=>n(o).text=s),"auto-size":""},null,8,["value"])]),_:1}),e(u,{label:"\u63CF\u8FF0",name:"description"},{default:t(()=>[e(d,{value:n(o).properties.description,"onUpdate:value":l[2]||(l[2]=s=>n(o).properties.description=s),"auto-size":""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),e(r,{key:"userTaskInfo",tab:"\u53C2\u4E0E\u8005"},{default:t(()=>[e(m,{layout:"vertical",class:"properties-panel-form",name:"pppform",model:n(o).properties},{default:t(()=>[e(u,{label:"\u5206\u914D\u7B56\u7565"},{default:t(()=>[e(p,{placeholder:"\u62A2\u4EFB\u52A1/\u4F1A\u7B7E",value:n(o).properties.fpcl,"onUpdate:value":l[3]||(l[3]=s=>n(o).properties.fpcl=s)},{default:t(()=>[e(a,{value:"single"},{default:t(()=>[Dt]),_:1}),e(a,{value:"complexus"},{default:t(()=>[At]),_:1})]),_:1},8,["value"])]),_:1}),e(u,{label:"\u53C2\u4E0E\u8005\u7C7B\u578B"},{default:t(()=>[e(p,{placeholder:"\u4EBA\u5458/\u89D2\u8272/\u8868\u8FBE\u5F0F",value:n(o).properties.zxrlx,"onUpdate:value":l[4]||(l[4]=s=>n(o).properties.zxrlx=s)},{default:t(()=>[e(a,{value:"users"},{default:t(()=>[Vt]),_:1}),e(a,{value:"roles"},{default:t(()=>[Ut]),_:1}),e(a,{value:"expression"},{default:t(()=>[Tt]),_:1})]),_:1},8,["value"])]),_:1}),e(u,{label:"\u8868\u8FBE\u5F0F",name:"text"},{default:t(()=>[e(d,{"auto-size":"",value:n(o).properties.zxr,"onUpdate:value":l[5]||(l[5]=s=>n(o).properties.zxr=s)},null,8,["value"])]),_:1}),e(u,{label:"\u63CF\u8FF0",name:"text"},{default:t(()=>[e(d,{"auto-size":"",value:n(o).properties.ms,"onUpdate:value":l[6]||(l[6]=s=>n(o).properties.ms=s)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),e(r,{key:"formConfig",tab:"\u8868\u5355"},{default:t(()=>[e(m,{layout:"vertical",class:"properties-panel-form",name:"fcform"},{default:t(()=>[e(u,{label:"\u8868\u5355\u6A21\u5F0F",extra:"\u5355\u8868\u5355/\u5DE5\u4F5C\u53F0"},{default:t(()=>[e(p,{placeholder:"\u5355\u8868\u5355/\u5DE5\u4F5C\u53F0\u52A0",value:n(o).properties.formtype,"onUpdate:value":l[7]||(l[7]=s=>n(o).properties.formtype=s)},{default:t(()=>[e(a,{value:"single"},{default:t(()=>[Mt]),_:1}),e(a,{value:"complexus"},{default:t(()=>[jt]),_:1})]),_:1},8,["value"])]),_:1}),e(u,{label:"\u8868\u5355"},{default:t(()=>[e(i,{placeholder:"\u8BF7\u8F93\u5165\u8868\u5355\u7EC4\u4EF6\u540D\u79F0\u6216\u8005url",value:n(o).properties.formurl,"onUpdate:value":l[8]||(l[8]=s=>n(o).properties.formurl=s)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(r,{key:"advanced",tab:"\u9AD8\u7EA7"},{default:t(()=>[e(m,{layout:"vertical",class:"properties-panel-form",model:n(o),name:"advform"},{default:t(()=>[e(u,{label:"\u5C5E\u6027",name:"properties"},{default:t(()=>[e(f,{value:n(o).properties},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],64)}}});var Pt={default:Ct,top:Et,"bpmn:userTask":Lt},St={bpmn:Pt};const It=g("JSON"),Kt=U({__name:"CodeViewer",props:{visible:{type:Boolean},graphViewer:null},emits:["update:visible"],setup(b,{emit:o}){const c=b,l=c.graphViewer,u=l.modelType.adapters;q.registerLanguage("json",$e),q.registerLanguage("xml",De);const d=Ae.component,m=V(""),r=V(u!=null&&u.default?"default":"json"),a=()=>{m.value=l.getData(r.value)};return ee(()=>c.visible,(p,f)=>{p&&a()}),(p,f)=>{const _=Ve,s=Ue,z=Te;return v(),$(z,{visible:b.visible,"onUpdate:visible":f[1]||(f[1]=y=>o("update:visible",y)),footer:null,destroyOnClose:"",wrapClassName:"full-modal",style:{top:"20px",left:"20px",width:"calc(100% - 40px)"}},{title:t(()=>[e(s,{value:r.value,"onUpdate:value":f[0]||(f[0]=y=>r.value=y),"button-style":"solid",onChange:a},{default:t(()=>[(v(!0),k(B,null,I(n(u),(y,E)=>(v(),$(_,{key:E,value:E},{default:t(()=>[g(A(y.label),1)]),_:2},1032,["value"]))),128)),e(_,{value:"json"},{default:t(()=>[It]),_:1})]),_:1},8,["value"])]),default:t(()=>[e(n(d),{autodetect:"",code:m.value},null,8,["code"])]),_:1},8,["visible"])}}}),Ht=g("\u5BFC\u5165 JSON \u6587\u4EF6\uFF08*.json\uFF09"),Nt=g(" \u5BFC\u51FA JSON \u6587\u4EF6\uFF08*.json\uFF09 "),Ot=g(" \u5BFC\u51FA\u56FE\u50CF\u6587\u4EF6 \uFF08*.png\uFF09 "),Jt=g(" \u4FDD\u5B58 "),Rt=C("svg",{class:"icon",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[C("path",{d:"M144 112h232a8 8 0 0 1 8 8v48a8 8 0 0 1-8 8H221.255l216.716 216.716a8 8 0 0 1 0 11.313l-33.942 33.942a8 8 0 0 1-11.313 0L176 221.255V376a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8V144c0-17.673 14.327-32 32-32z m-32 536v232c0 17.673 14.327 32 32 32h232a8 8 0 0 0 8-8v-48a8 8 0 0 0-8-8H221.884l215.901-215.901a8 8 0 0 0 0-11.314l-33.941-33.941a8 8 0 0 0-11.314 0L176 803.374V648a8 8 0 0 0-8-8h-48a8 8 0 0 0-8 8z m690.744 200L586.529 631.785a7.999 7.999 0 0 1 0-11.314l33.941-33.941a8 8 0 0 1 11.314 0L848 802.747V648a8 8 0 0 1 8-8h48a8 8 0 0 1 8 8v232c0 17.673-14.327 32-32 32H648a8 8 0 0 1-8-8v-48a8 8 0 0 1 8-8h154.744zM912 376V144c0-17.673-14.327-32-32-32H648a8 8 0 0 0-8 8v48a8 8 0 0 0 8 8h155.373l-217.03 217.029a8 8 0 0 0 0 11.314l33.941 33.941a8 8 0 0 0 11.314 0L848 221.882V376a8 8 0 0 0 8 8h48a8 8 0 0 0 8-8z"})],-1),Wt=C("svg",{class:"icon",viewBox:"100 100 820 820",width:"1em",height:"1em"},[C("path",{d:"M541.141333 268.864l61.717334 16.938667-132.394667 482.474666-61.717333-16.938666 132.394666-482.474667zM329.002667 298.666667l44.885333 45.610666-175.36 172.586667 175.04 167.573333-44.266667 46.229334L106.666667 517.504 329.002667 298.666667z m355.882666 0l222.336 218.837333L684.586667 730.666667l-44.266667-46.229334 175.018667-167.573333L640 344.277333 684.885333 298.666667z"})],-1),Yt=U({__name:"toolbar",setup(b){const o=Me("modeler_context"),{exportPng:c,exportData:l,modelType:i,showMiniMap:u,toggleMiniMap:d,scale:m,zoomOut:r,zoomIn:a,resetZoom:p,fitView:f,modified:_,undoDisable:s,redoDisable:z,undo:y,redo:E,propertiesPanel:M}=o,w=o.modelType.adapters,T=V(!1);return(D,F)=>{const le=Le,h=te,ae=Pe,j=Se,W=Ie,se=Ke,Y=He,ue=Ne,ie=Oe,L=Je,pe=Re,re=We,_e=Ye,de=qe,P=Ge,ce=Xe,me=Ze,fe=Qe,ve=et,ge=je,he=Kt;return v(),k(B,null,[e(ge,null,{default:t(()=>[e(L,null,{default:t(()=>[e(h,{disabled:""},{icon:t(()=>[e(le)]),_:1}),e(h,{disabled:""},{icon:t(()=>[e(ae)]),_:1}),e(Y,{trigger:["click"]},{overlay:t(()=>[e(W,null,{default:t(()=>[(v(!0),k(B,null,I(n(w),(x,S)=>(v(),$(j,{key:S},{default:t(()=>[g(" \u5BFC\u5165 "+A(x.label)+" \u6587\u4EF6\uFF08*."+A(x.extension)+"\uFF09 ",1)]),_:2},1024))),128)),e(j,{key:"json"},{default:t(()=>[Ht]),_:1})]),_:1})]),default:t(()=>[e(h,{id:"import"},{icon:t(()=>[e(se)]),_:1})]),_:1}),e(Y,{trigger:["click"]},{overlay:t(()=>[e(W,null,{default:t(()=>[(v(!0),k(B,null,I(n(w),(x,S)=>(v(),$(j,{key:S,onClick:Gt=>n(l)(n(i).name+"."+x.extension,S)},{default:t(()=>[g(" \u5BFC\u51FA "+A(x.label)+" \u6587\u4EF6\uFF08*."+A(x.extension)+"\uFF09 ",1)]),_:2},1032,["onClick"]))),128)),e(j,{key:"json",onClick:F[0]||(F[0]=x=>n(l)(n(i).name+".json","json"))},{default:t(()=>[Nt]),_:1}),e(ue),e(j,{key:"png",onClick:F[1]||(F[1]=x=>n(c)(n(i).name))},{default:t(()=>[Ot]),_:1})]),_:1})]),default:t(()=>[e(h,{id:"export"},{icon:t(()=>[e(ie)]),_:1})]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(h,{disabled:!n(_),type:"primary"},{icon:t(()=>[e(pe)]),default:t(()=>[Jt]),_:1},8,["disabled"])]),_:1}),e(L,null,{default:t(()=>[e(h,{disabled:n(s),onClick:n(y)},{icon:t(()=>[e(re)]),_:1},8,["disabled","onClick"]),e(h,{disabled:n(z),onClick:n(E)},{icon:t(()=>[e(_e)]),_:1},8,["disabled","onClick"])]),_:1}),e(L,null,{default:t(()=>[e(h,{onClick:n(r)},{icon:t(()=>[e(de)]),_:1},8,["onClick"]),e(P,{title:"\u70B9\u51FB\u6B64\u5904\uFF0C\u6062\u590D\u539F\u59CB\u5927\u5C0F\u548C\u4F4D\u7F6E"},{default:t(()=>[e(h,{style:{padding:"4px"},onClick:n(p)},{default:t(()=>[g(A(n(m).percentage),1)]),_:1},8,["onClick"])]),_:1}),e(h,{onClick:n(a)},{icon:t(()=>[e(ce)]),_:1},8,["onClick"]),e(P,{title:"\u81EA\u9002\u5E94\u5927\u5C0F"},{default:t(()=>[e(h,{id:"fitView",onClick:F[2]||(F[2]=x=>n(f)(100))},{icon:t(()=>[e(n(G),null,{component:t(()=>[Rt]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(P,{title:"\u663E\u793A/\u9690\u85CF \u7F29\u7565\u56FE\u5BFC\u822A"},{default:t(()=>[e(h,{onClick:F[3]||(F[3]=x=>n(d)()),type:n(u)?"primary":"default"},{icon:t(()=>[e(me)]),_:1},8,["type"])]),_:1}),e(P,{title:"\u663E\u793A/\u9690\u85CF \u5C5E\u6027\u9762\u677F"},{default:t(()=>[e(h,{disabled:n(M).disabled,onClick:n(M).toggleCollapsed,type:n(M).collapsed?"default":"primary"},{icon:t(()=>[e(fe)]),_:1},8,["disabled","onClick","type"])]),_:1}),e(h,{disabled:""},{icon:t(()=>[e(ve)]),_:1}),e(P,{title:"\u67E5\u770B\u4EE3\u7801"},{default:t(()=>[e(h,{onClick:F[4]||(F[4]=x=>T.value=!0),type:T.value?"primary":"default"},{icon:t(()=>[e(n(G),null,{component:t(()=>[Wt]),_:1})]),_:1},8,["type"])]),_:1})]),_:1})]),_:1}),e(he,{visible:T.value,"onUpdate:visible":F[5]||(F[5]=x=>T.value=x),graphViewer:n(o)},null,8,["visible","graphViewer"])],64)}}});const qt=U({__name:"index",setup(b){const o=V(),c=V(30),l=new URLSearchParams(location.search),i=l.has("modelType")?l.get("modelType"):"bpmn",u=V(i),d=Z.find(_=>_.name===u.value)||Z[0],m=St[d.name],r=tt(d,m),{propertiesPanel:a}=r;function p(){if(o.value&&r.lf){const{width:_,height:s}=o.value.getBoundingClientRect();r.lf.resize(_-8,s-8)}}async function f(_){if(!(!o.value||!r.lf)&&_[1]&&_[1].size){const s=_[1].size;a.collapsed=s<5,c.value=s}}return ft("modeler_context",r),nt(()=>{if(!o.value){console.log("error container is null");return}const _={container:o.value,adjustEdgeStartAndEnd:!0,edgeTextDraggable:!0,multipleSelectKey:"meta",style:{nodeText:{overflowMode:"autoWrap"}},keyboard:{enabled:!0},plugins:[ot,lt,at,st,ut,it]};r.initLogicFlow(_);let s=!1;pt(o.value,()=>{s||(s=!0,setTimeout(async()=>{s=!1,await vt(),p()},500))})}),(_,s)=>{const z=gt,y=ht,E=bt;return v(),$(E,{style:{height:"100%",width:"100%",margin:"0",overflow:"hidden"}},{default:t(()=>[e(z,{style:{background:"#fff",height:"42px","line-height":"32px",padding:"5px 10px"}},{default:t(()=>[e(Yt)]),_:1}),e(y,null,{default:t(()=>[e(n(rt),{class:"default-theme",onResized:f,"dbl-click-splitter":!1,"push-other-panes":!1},{default:t(()=>[e(n(X),{size:n(a).collapsed?100-c.value/100:100-c.value},{default:t(()=>[C("div",{ref_key:"container",ref:o,style:{height:"100%",width:"100%",padding:"4px","box-shadow":"0 0 4px rgb(0 0 0 / 30%) inset",background:"#fff"}},null,512)]),_:1},8,["size"]),_t(e(n(X),{size:n(a).collapsed?c.value/100:c.value,style:{padding:"10px","background-color":"#f8f8f8",overflow:"hidden auto"}},{default:t(()=>[(v(),$(ct,null,[(v(),$(mt(n(a).component)))],1024))]),_:1},8,["size"]),[[dt,!n(a).collapsed]])]),_:1})]),_:1})]),_:1})}}});xt(qt).mount("#app");
